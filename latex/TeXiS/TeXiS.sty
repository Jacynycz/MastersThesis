%---------------------------------------------------------------------
%
%                          TeXiS.sty
%
%---------------------------------------------------------------------
%
% TeXiS.sty
% Copyright 2009 Marco Antonio Gomez-Martin, Pedro Pablo Gomez-Martin
%
% This file belongs to TeXiS, a LaTeX template for writting
% Thesis and other documents. The complete last TeXiS package can
% be obtained from http://gaia.fdi.ucm.es/projects/texis/
%
% This work may be distributed and/or modified under the
% conditions of the LaTeX Project Public License, either version 1.3
% of this license or (at your option) any later version.
% The latest version of this license is in
%   http://www.latex-project.org/lppl.txt
% and version 1.3 or later is part of all distributions of LaTeX
% version 2005/12/01 or later.
%
% This work has the LPPL maintenance status `maintained'.
%
% The Current Maintainers of this work are Marco Antonio Gomez-Martin
% and Pedro Pablo Gomez-Martin
%
%---------------------------------------------------------------------
%
% Fichero que declara nuevos comandos LaTeX usados a lo largo
% del documento
%
%---------------------------------------------------------------------

\ProvidesPackage{TeXiS/TeXiS}

\RequirePackage{verbatim}  % Se necesita para el comando "example".
                           % Si el paquete por alguna raz_n no es
                           % compatible con alguno otro utilizado
                           % puedes quitar el comando example y
                           % eliminar la dependencia; el comando
                           % example es utilizado en el manual de la
                           % plantilla, pero no es probable que lo
                           % necesites en otro tipo de documentos.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Constante:
% \texisVer
% Resultado:
% Versi_n de la plantilla.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\def\texisVer{1.1+}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Constante:
%
%       \texis
%
% Resultado:
%
% Escribe TeXiS elevando y bajando las vocales.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\newcommand{\texis}{\TeX iS}
\def\texis{\TeX \raise.15em\hbox{\textsc{i}}S}

%\def\texis{\TeX
%  \kern-.36em%
%  {\setbox0=\hbox{T}%
%\kern+.35em%
%    \vbox to \ht0{\hbox{\the\scriptfont0 I}\vss}}%
%  %\kern-.15em%
%  S
%}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%
%% COMANDOS GENERALES NO DEPENDIENTES DEL MODO DE COMPILACI_N
%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Comando:
% \imagen{nombre-fich}{argumentos}
% Resultado:
% Inserta una figura, utilizando \includegraphics.
% Es conveniente utilizar esta macro, porque ahorra la indicaci_n
% expl_cita del directorio Imagenes, en el que se asume que estar_
% la figura.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\imagen}[2]{%
\includegraphics[#2]{Imagenes/#1}%
} % \newcommand{\imagen}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Comando:
% \figura{nombre-fichero}{argumentos}{etiqueta}{t_tulo}
% Resultado:
% Inserta una figura. "La figura~\ref{etiqueta} muestra..." permite
% referenciar la figura desde el texto.
% argumentos: width=Xcm,height=Ycm,angle=Z
% No se debe poner extensi_n en el nombre del fichero. Si si est_
% compilando con LaTeX se asumir_ .eps. Si se est_ usando pdflatex
% se asumir_ que es .pdf.
%
% Nota: Si se quiere incluir un t_tulo m_s corto para el _ndice,
% utilizar el comando \figuraEx
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\figura}[4]{%
\begin{figure}[t]%
\begin{center}%
\imagen{#1}{#2}%
\caption{#4.} \label{#3}%
\end{center}%
\end{figure}%
} % \newcommand{\figura}

\newcommand{\sst}[1]{\subsubsection*{#1}}

\newcommand{\figuraHere}[4]{%
\begin{figure}[h!]%
\begin{center}%
\imagen{#1}{#2}%
\caption{#3.} \label{#4}%
\end{center}%
\end{figure}%
} % \newcommand{\figura}

\newcommand{\figuraAD}[9]{%

  % \clearpage
 % \begin{minipage}{\linewidth}
  \begin{center}
  \begin{table}[hp!]
    \begin{tabular}{|l|l|}
      \hline
      \rowcolor{lightgray} 
      #1 & \bb{#2} \\ \hline
      Description & #3 \\ \hline
      Input & #4 \\ \hline
      Output & #5 \\ \hline
      Requirements & #6 \\ \hline
      Precondition & #7 \\ \hline
      Post-condition & #8 \\ \hline
    \end{tabular}
    \caption{Functional requirements of #9.}
    \label{fr:#1}
  \end{table}

  % \vspace{-0.5 em}
  \begin{figure}[hp!]%
     \begin{center}
      \imagen{Diag/#1.png}{width=0.8\linewidth}%
      \caption{Activity diagram of #9.}
      \label{ad:#1}%
      \end{center}
  \end{figure}%
\end{center}
%\end{minipage}
}

\newcommand{\figuraADF}[9]{%

  %\clearpage
  \begin{center}
  \begin{table}[hp!]
    \begin{tabular}{|l|l|}
      \hline
      \rowcolor{lightgray} 
      #1 & \bb{#2} \\ \hline
      Description & #3 \\ \hline
      Input & #4 \\ \hline
      Output & #5 \\ \hline
      Requirements & #6 \\ \hline
      Precondition & #7 \\ \hline
      Post-condition & #8 \\ \hline
    \end{tabular}
    \caption{Functional requirements of #9.}
    \label{fr:#1}
  \end{table}

  % \vspace{-0.5 em}
  \begin{figure}[hp!]%
     \begin{center}
      \imagen{Diag/#1.png}{width=0.8\linewidth}%
      \caption{Activity diagram of #9.}
      \label{ad:#1}%
      \end{center}
  \end{figure}%
\end{center}

}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Comando:
% \figuraEx{nombre-fich}{argumentos}{etiqueta}{t_tulo}{titulo_corto}
% Resultado:
% Inserta una figura. "La figura~\ref{etiqueta} muestra..." permite
% referenciar la figura desde el texto.
% argumentos: width=Xcm,height=Ycm,angle=Z
% No se debe poner extensi_n en el nombre del fichero. Si si est_
% compilando con LaTeX se asumir_ .eps. Si se est_ usando pdflatex
% se asumir_ que es .pdf.
% El _ltimo par_metro define el t_tulo que aparecer_ en el _ndice de
% figuras.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\figuraEx}[5]{%
\begin{figure}[t]%
\begin{center}%
\imagen{#1}{#2}%
\caption[#5]{#4} \label{#3}%
\end{center}%
\end{figure}%
} % \newcommand{\figura}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Entorno:
% resumen
% Uso:
% Sirve para marcar los res_menes que aparecen al principio de cada
% cap_tulo.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newenvironment{resumen}{%
\begin{quotation}\noindent\begin{small}\textbf{\textsc{Resumen:}}%
}%
{%
\end{small}\end{quotation}%
\bigskip%
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Comando:
%
%       \begin{FraseCelebre}
%             \begin{Frase}
%                Y as_, del mucho leer y del poco dormir...
%             \end{Frase}
%             \begin{Fuente}
%                Don Quijote de la Mancha
%
%                Miguel de Cervantes
%             \end{Fuente}
%       \begin{FraseCelebre}
%
% Resultado:
%
% A_ade la frase c_lebre del principio de un cap_tulo.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newenvironment{FraseCelebre}% Definici_n del entorno de FraseCelebre
 {\begin{list}{}{%
     \setlength{\leftmargin}{0.38\textwidth}% Desplazamos el inicio de
                                 % los p_rrafos a la derecha la mitad
                                 % de la anchura de la l_nea de texto.
                                 % Puede que quieras cambiar esto
                                 % por otra cantidad como '5cm'.
     \setlength{\parsep}{0cm}% La separaci_n entre p_rrafos de la
                             % frase o de la fuente es normal, sin
                             % espacio extra.
     \addtolength{\topsep}{0.5cm}% Aumentamos un poco la separaci_n
                                 % entre la parte de la fase c_lebre
                                 % y los p_rrafos de alrededor
   }
 }
 {\unskip \end{list}}

\newenvironment{Frase}%
  {\item \begin{flushright}\small\em}%
  {\end{flushright}}

\newenvironment{Fuente}%
  {\item \begin{flushright}\footnotesize}%
  {\end{flushright}}
%
% Notas de lo que hace:
% El entorno FraseCelebre es un entorno de lista. Uno de esos entornos
% sirve para hacer tus \begin{enumerate} o \begin{itemize}
% particulares.  Se definen cosas como el margen izquierdo y derecho
% de cada p_rrafo, la separaci_n entre cada p_rrafo dentro del mismo
% \item, la separaci_n entre items y cosas as_. Todo eso se hace en la
% definici_n del entorno de la lista, en nuestro caso en FraseCelebre.
% Hay informaci_n sobre las cosas parametrizables en la p_gina 62 del
% libro "The LaTeX companion".  Luego para la frase y el autor
% podr_amos poner \item y el texto y listo.  Pero en lugar de eso he
% creado otros dos entornos para poderlos alinear a la derecha (no he
% conseguido crearlo directamente en la definici_n de la lista de
% FraseCelebre... a parte de que haciendolo as_ podr_a decidir no
% alinear el autor y funcionar_a ;-))

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Comando:
%
%       \begin{example}
%       Alg_n c_digo LaTeX
%       \begin{example}
%
% Resultado:
%
% Divide en dos columnas la salida; en la izquierda a_ade el c_digo
% LaTeX literal contenido en el entorno, y en el derecho el resultado
% de su compilaci_n.
%
% Fuente:
%
% Este comando es una adaptaci_n del utilizado en el libro "The not so
% short introduction to LaTeX2e" cuyo c_digo fuente est_
% disponible. Se han invertido las columnas (en el libro el c_digo
% LaTeX aparec_a a la derecha), y se ha a_adido alg_n comentario.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newwrite\example@out
\newenvironment{example}%
% Al principio del entorno, se abre un fichero auxiliar
% donde se graba todo lo que se lee dentro del entorno
 {\begingroup
  \@bsphack
  \immediate\openout \example@out \jobname.exa
  \let\do\@makeother\dospecials\catcode`\^^M\active
  \def\verbatim@processline{%
    \immediate\write\example@out{\the\verbatim@line}}%
  \verbatim@start}%
% Al final del entorno, se cierra el fichero auxiliar y...
 {\immediate\closeout\example@out\@esphack\endgroup%
%
% ... se copia en dos minipage distintas, una que tiene un verbatim
% para que el texto quede tal cual, y otra normal para que se
% compile.
%
  \par\small\addvspace{3ex plus 1ex}\vskip -\parskip
  \noindent
  \makebox[0.5\linewidth][l]{%
  \begin{minipage}[t]{0.50\linewidth}
    \vspace*{-1ex}
    \verbatiminput{\jobname.exa}
  \end{minipage}}
  \hfill%
  \makebox[0.45\linewidth][l]{%
  \begin{minipage}[t]{0.45\linewidth}
    \vspace*{-2ex}
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{1ex plus 0.4ex minus 0.2ex}
    \begin{trivlist}
      \item\input{\jobname.exa}
    \end{trivlist}
  \end{minipage}}%
  \par\addvspace{3ex plus 1ex}\vskip -\parskip
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Comando:
%
%       \begin{cambiamargen}{izdo}{der}
%            BLA BLA BLA
%       \end{cambiamargen}
%
% Resultado:
%
% Modifica el margen de la p_gina en los p_rrafos que est_n dentro del
% entorno. Los dos par_metros indican el _desplazamiento_ del margen
% respecto al margen original. Un valor positivo en ambos hace que las
% l_neas sean m_s cortas, y uno negativo las alarga.
%
% El funcionamiento se basa en utilizar un entorno lista, que permite
% especificar directamente los desplazamientos respecto a los m_rgenes
% originales de los extremos de sus p_rrafos. Pero la variable
% \textwidth _no_ cambia, por lo que no cuentes con ella internamente
% para, por ejemplo, ajustar tablas o algo as_.
%
% Para m_s informaci_n sobre los m_rgenes, consulta el fichero de la
% portada, TeXiS_cover.tex
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newenvironment{cambiamargen}[2]{%
  \begin{list}{}{%
    \setlength{\topsep}{0pt}%
    \setlength{\leftmargin}{#1}%
    \setlength{\rightmargin}{#2}%
    \setlength{\listparindent}{\parindent}%
    \setlength{\itemindent}{\parindent}%
    \setlength{\parsep}{\parskip}%
  }%
  \item[]}{\end{list}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%
%% COMANDOS DEPENDIENTES DEL MODO DE COMPILACI_N
%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%
% Definici_n  de las  constantes  que  se arrastran  en  el resto  del
% documento para configurar el modo en el que se compila.
%

\ifx\release\undefined
    % S_mbolos a definir en modo debug
    \def\debug{1}
    \def\printtodos{1}
    \def\printcoments{1}
    %\psdraft
    %  Si  se descomenta,  las  im_genes  no  se incluir_n  en  el
    % documento  (por lo  que compilar_ m_s  r_pido); en  su lugar
    % aparece  el recuadro  que ocupar_n (de  esa forma  puede uno
    % hacerse  a la idea  de su tama_o  y situaci_n en  el texto).
    % Para que este funcione, tiene que incluirse antes el paquete
    % ps

    % Para que  los comentarios salgan en un  recuadro en lugar de
    % en un p_rrafo normal
    \def\comsdestacados{1}
\else
    % S_mbolos a definir en modo release
    \def\generaindice{1}
    \def\generatoc{1}
    \ifx\acronimosEnRelease\undefined
    \else
        \def\generaacronimos{1}
    \fi
\fi

%%%%%
%%
%% Explicaci_n de los s_mbolos que cambian el comportamiento
%%
%%%%%
%%
%
% \generatoc
%
% Si est_ definido, se genera la tabla de contenidos
%
%%%
%
% \generaindice
%
% Si est_ definido, se "genera" el _ndice de palabras.  En realidad el
% soporte para el  _ndice de palabras es embrionario,  por lo que esta
% constante en la pr_ctica  *no* se utiliza. Consulta la documentaci_n
% en TeXiS_pream.tex  para m_s informaci_n.
%
%%%
%
% \generaacronimos
%
% Si est_ definido, se genera la lista de acr_nimos
%
%%%
%
% \printtodos
%
% Si est_ definido, se escriben los 'TODOs'
%
%%%
%
% \printcoments
%
% Si est_ definido, se escriben los comentarios
%
%%%
%
% \comsdestacados
%
% Hace que los comentarios (si se est_n imprimiendo),
% aparezcan resaltados.
%
%%%



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Comando:
% \com{texto}
% Resultado:
% Usado para marcar comentarios que en fases de revisi_n deben
% imprimirse. Para versiones ``definitivas'', en vez
% de borrarlos, se cambia la definici_n del comando.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ifx\printcoments\undefined
\newcommand{\com}[1]{}
\else
\ifx\comsdestacados\undefined
\newcommand{\com}[1]{\textsc{Comentario:} #1}
\else
\newcommand{\com}[1]{\comImpl{#1}}
\fi
\fi

\newcommand{\comImpl}[1]{\noindent \hspace*{-0.1\textwidth}
\begin{small}
\fbox{\parbox{1.1\textwidth}{
 \textsc{Comentario:} #1}}
\end{small}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Comando:
% \comp{texto}
% Resultado:
% Usado para marcar  comentarios _dentro de p_rrafos_ que  en fases de
% revisi_n deben imprimirse. Para versiones ``definitivas'', en vez de
% borrarlos, se cambia la definici_n del comando.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ifx\printcoments\undefined
\newcommand{\comp}[1]{}
\else
\ifx\comsdestacados\undefined
\newcommand{\comp}[1]{({\small \textsc{Comentario: #1}})}
\else
\newcommand{\comp}[1]{\compImpl{#1}}
\fi
\fi

\newcommand{\compImpl}[1]{ \textbf{({\small \textsc{Comentario: #1 }})}}

% Incluimos el fichero que incorpora todos los paquetes necesarios
\include{TeXiS/TeXiS_pream}

% Incluimos el fichero que define la cabecera utilizada, y macros
% _tiles utilizadas en cap_tulos y secciones especiales
\include{TeXiS/TeXiS_cab}

% Fichero con las macros para crear las portadas
\include{TeXiS/TeXiS_cover}

% Fichero con las macros para definir partes en el documento
\include{TeXiS/TeXiS_part}

% Fichero con las macros para crear las dedicatorias
\include{TeXiS/TeXiS_dedic}

% Fichero con las macros para crear la bibliografia
\include{TeXiS/TeXiS_bib}

% Variable local para emacs, para que encuentre el fichero
% maestro de compilaci_n
%%%
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../Tesis.tex"
%%% End:
